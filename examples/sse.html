<!DOCTYPE html>
<html>
<head>
    <title>SSE test</title>
    <script type="text/javascript">
        window.addEventListener("DOMContentLoaded", function () {
            var evsrc = new EventSource('http://127.0.0.1:5001/files/s01.zip?unzip');
            evsrc.onmessage = function (ev) {
                if (ev.data === "done") {
                    console.log("closing");
                    evsrc.close();
                }
                document.getElementById("log")
                    .insertAdjacentHTML("beforeend", "<li>" + ev.data + "</li>");
            }
            evsrc.onerror = function (ev) {
                console.log("readyState = " + ev.currentTarget.readyState);
                evsrc.close();
            }
            console.log("readyState = ");
        })
    </script>
</head>
<body>
<h1>SSE test</h1>
<div>
    <ul id="log">
    </ul>
</div>
</body>
</html>
